---
# DHCP configuration
PRIMARY_INTERFACE: ens18   #Primary interface on a VLAN and subnet with an internet connection (and a DHCP server if using a secondary interface for pxe)

USE_PXE_INTERFACE: false   #
PXE_INTERFACE: ens19   #(optional) Secondary interface on a VLAN and subnet with no DHCP or internet connection

SUBNET: 10.245.0.0
NETMASK: 255.255.0.0
DNS_SERVER: 1.1.1.1   #can have multiple DNS servers separated by a comma and a space (ex: 1.1.1.1, 8.8.8.8)

#ISO info
default_iso_name:  bde-7180-pc.iso  #default iso for ipxe menu
isos:
  - file_name: bde-7180-pc.iso   #ISO file name in local folder
    menu_description: Drive Eraser 7.18.0 64-bit   #description of ISO that will appear in the ipxe menu
    enabled: true

  - file_name: dev-bde-7180-pc.iso
    menu_description: Drive Eraser 7.18.0 64-bit Development Workflow
    enabled: true

  - file_name: bde-7172-pc.iso
    menu_description: Drive Eraser 7.17.2 64-bit
    enabled: false

  - file_name: dev-bde-7172-pc.iso
    menu_description: Drive Eraser 7.17.2 64-bit Development Workflow
    enabled: false

  - file_name: bde-7171-pc.iso
    menu_description: Drive Eraser 7.17.1 64-bit
    enabled: false

#   NOTHING BELOW HERE SHOULD NEED TO BE CHANGED

#ISO Related Directories (DON'T CHANGE)
IMAGES_CONTENT: "{{ WEB_ROOT }}Images_Content"
ISO_IMAGES: "{{ WEB_ROOT }}ISO_Images"

#Set conditionally based on if using PXE interface
DHCP_INTERFACE: "{{ PXE_INTERFACE if USE_PXE_INTERFACE else PRIMARY_INTERFACE }}"
SERVER_IP: "{{ GATEWAY_IP if USE_PXE_INTERFACE else ansible_facts['default_ipv4']['address'] }}"

#SET BASED ON SUBNET AND NETMASK
GATEWAY_IP: "{{ SUBNET | ansible.utils.ipmath(1) }}"   #IP of the gateway. if pxe interface is used, it will be the same as the server IP. if only using primary interface, it will be the IP of your router
DHCP_RANGE_START: "{{ SUBNET | ansible.utils.ipmath(5) }}" #start of DHCP range, set as the 5th ip in the subnet 
DHCP_RANGE_END: "{{ (((SUBNET + '/' + NETMASK) | ansible.utils.ipaddr('net')) | ansible.utils.usable_range)['usable_ips'][-3] }}"   #End of DHCP range, set as 2nd to last usable IP (ex: 10.250.0.253) in the subnet, leaving one useable IP at the end before the broadcast IP
